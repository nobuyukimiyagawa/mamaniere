<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,user-scalable=yes" />

  <!-- CSS -->
  <link rel="stylesheet" href="../css/reset.css">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/under.css">

  <!-- JS -->
  <script src="../js/jquery-3.6.0.min.js"></script>
  <script src="../js/main.js"></script>

  <title>お役立ち情報｜mamaniere</title>
</head>

<body>

<header>
  <nav>
    <ul class="header_nav" id="global_nav">
      <li><a href="../"><span></span>ホーム</a></li>
      <li><a href="../about/"><span></span>ママニエール</a></li>
      <li><a href="../analysis/"><span></span>体調チェック</a></li>
      <li><a href="../service/"><span></span>サービス検索</a></li>
      <li class="current"><a href="../care/"><span></span>お役立ち情報</a></li>
      <li><a href="../column/"><span></span>コラム</a></li>
    </ul>
  </nav>
</header>

<main>

<section class="service_results_page post_care">
  <div class="under_page_title">
    <h1>お役立ち情報</h1>
  </div>

  <div class="inner">
    <ul class="service_result_list" id="care_list"></ul>

    <!-- ページネーション -->
    <div class="service_results_page_pagination" id="pagination"></div>
  </div>
</section>

</main>

<footer>
  <div class="inner">
    <div class="footer_nav">
      <ul>
        <li><a href="#">利用規約</a></li>
        <li><a href="#">監修</a></li>
        <li><a href="#">お店について</a></li>
      </ul>
    </div>
  </div>
</footer>

<script>
/* ======================================
   固定 JSON（元WP投稿の代わり）
====================================== */

const CARE_POSTS = [
  {
    id: 1,
    title: "産後の睡眠改善に役立つ3つのポイント",
    excerpt: "産後ママの睡眠負担を軽減するための実践テクニックを紹介します。",
    thumbnail: "../images/dummy01.jpg",
    url: "../care/post1.html",
    terms: [
      { name: "睡眠", color: "#d2b9d7" },
      { name: "ライフハック", color: "#f3d5b5" }
    ]
  },
  {
    id: 2,
    title: "授乳中ママの食事ガイド",
    excerpt: "栄養バランスを整えることで育児のパフォーマンスが向上します。",
    thumbnail: "../images/dummy02.jpg",
    url: "../care/post2.html",
    terms: [
      { name: "食事", color: "#b9e1d7" }
    ]
  },
  {
    id: 3,
    title: "子どもの生活リズムを整える方法",
    excerpt: "生活リズムを整えてママと子どもの負担を減らしましょう。",
    thumbnail: "../images/dummy03.jpg",
    url: "../care/post3.html",
    terms: [
      { name: "生活習慣", color: "#ffe3b3" }
    ]
  }
];

/* ======================================
   一覧描画
====================================== */
function renderList(page = 1, perPage = 6) {
  const start = (page - 1) * perPage;
  const end = start + perPage;
  const posts = CARE_POSTS.slice(start, end);

  const listEl = document.getElementById("care_list");
  listEl.innerHTML = "";

  posts.forEach(post => {
    const li = document.createElement("li");
    li.className = "service_result_card";

    li.innerHTML = `
      <a href="${post.url}" class="service_result_card_inner">
        <div class="service_result_card_thumb">
          <img src="${post.thumbnail}" alt="">
        </div>

        <div class="service_result_card_body">

          <div class="service_result_card_tags">
            ${post.terms.map(t =>
              `<span class="service_result_card_tag" style="background-color:${t.color}">${t.name}</span>`
            ).join("")}
          </div>

          <h2 class="service_result_card_title">${post.title}</h2>

          <div class="service_result_card_excerpt">${post.excerpt}</div>
        </div>
      </a>
    `;

    listEl.appendChild(li);
  });

  renderPagination(page);
}

/* ======================================
   ページネーション
====================================== */
function renderPagination(currentPage) {
  const total = CARE_POSTS.length;
  const perPage = 6;
  const totalPages = Math.ceil(total / perPage);

  const container = document.getElementById("pagination");
  container.innerHTML = "";

  if (totalPages <= 1) return;

  // 前へ
  if (currentPage > 1) {
    const prev = document.createElement("a");
    prev.href = "#";
    prev.textContent = "前へ";
    prev.onclick = e => { e.preventDefault(); renderList(currentPage - 1); };
    container.appendChild(prev);
  }

  // ページ番号
  for (let i = 1; i <= totalPages; i++) {
    const span = document.createElement("span");
    span.textContent = i;
    if (i === currentPage) span.classList.add("current");
    else {
      span.onclick = () => renderList(i);
    }
    container.appendChild(span);
  }

  // 次へ
  if (currentPage < totalPages) {
    const next = document.createElement("a");
    next.href = "#";
    next.textContent = "次へ";
    next.onclick = e => { e.preventDefault(); renderList(currentPage + 1); };
    container.appendChild(next);
  }
}

// 初期表示
renderList();

</script>

</body>
</html>
